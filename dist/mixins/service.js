"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_constant=require("./constant.js"),Constnat=_interopRequireWildcard(_constant),service={Aget:function(e,t,n){return new Promise(function(n,a){_wepy2.default.request({url:Constnat.PLATFORM.DOMAIN+e,data:t,method:"GET",header:{},success:function(e){200==e.statusCode?n({res:e.data.data,code:e.data.code,msg:e.data.message,state:e.data.success}):a({res:"SERVER ERROR",state:!1})},fail:function(e){a({res:"SERVER ERROR",state:!1})}})})},Apost:function(e,t,n){return new Promise(function(n,a){_wepy2.default.request({url:Constnat.PLATFORM.DOMAIN+e,data:t,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(e){200==e.statusCode?n({res:e.data.data,code:e.data.code,msg:e.data.message,state:e.data.success}):a({msg:"SERVER ERROR",state:!1})},fail:function(e){a({msg:"SERVER ERROR",state:!1})}})})},requestGet:function(e,t,n){_wepy2.default.request({url:Constnat.PLATFORM.DOMAIN+e,data:t,method:"GET",header:{},success:function(e){200==e.statusCode&&200==e.data.code?n(e,e.data.success):n(e,!1)},fail:function(e){console.log("requestGet fail:"+JSON.stringify(e)),n(e,!1)}})},requestPost:function(e,t,n){_wepy2.default.request({url:Constnat.PLATFORM.DOMAIN+e,data:t,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(e){200==e.statusCode&&200==e.data.code?n(e,e.data.success):n(e,!1)},fail:function(e){n(e,!1)}})},fetchUserInfo:function(e){return new Promise(function(t,n){_wepy2.default.request({url:Constnat.PLATFORM.DOMAIN+"user/getUserInfo",data:{jsCode:e},method:"GET",success:function(e){t(e)},fail:function(e){n(e)}})})},getUserInfo:function(e){_wepy2.default.getUserInfo({success:function(t){e(t,!0)},fail:function(t){e(t,!1)}})},getDecryptionData:function(e){var t={encryptedData:wx.getStorageSync("encryptedData"),iv:wx.getStorageSync("iv"),sessionInfo:wx.getStorageSync("thirdSessionId")};_wepy2.default.request({header:{"Content-Type":"application/x-www-form-urlencoded"},url:Constnat.PLATFORM.DOMAIN+"user/register",data:t,method:"POST",success:function(t){e(t,!0)},fail:function(t){e(t,!1)}})}};exports.default=service;